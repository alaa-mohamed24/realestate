{% load static %}
{% load humanize %}

<!DOCTYPE html>
<html>
<head>
    <title>{{ future_Land }}</title>
    
    
    <!-- ربط Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <!-- ربط ملف CSS بتاعك -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">



    <meta property="og:title" content="future land - أفضل عروض للبيع والإيجار في أكتوبر" />
    <meta property="og:description" content="شاهد أحدث العقارات المتاحة في أكتوبر - شقق، فيلات، عمارات وأكثر بأسعار مميزة!" />
    <meta property="og:image" content="https://alaamohamed24.pythonanywhere.com/properties//static/main/new_logo.png" />
    <meta property="og:url" content="https://alaamohamed24.pythonanywhere.com/properties/" />
    <meta property="og:type" content="website" />
    
   

    <style>
      .custom-blue {
        background-color: hwb(210 7% 54%);
      }
    </style>
</head>
<body 
     class="container mt-4"> 
     <h1 class="text-center mb-4 custom-header-bg">future Land</h1>

    <h1 class="text-center mb-4 custom-header-bg">Property List</h1>
     
<!-- فورم الفلترة -->
<form method="get" class="row g-2 mb-3">
  <div class="col-md-3">
      <select name="category" class="form-select filter-select">
          <option value="">sale or rent</option>
          <option value="sale" {% if category == 'sale' %}selected{% endif %}>Sale</option>
          <option value="rent" {% if category == 'rent' %}selected{% endif %}>Rent</option>
      </select>
  </div>

  <div class="col-md-2">
      <select name="property_type" class="form-select filter-select">
          <option value="">property type</option>
          <option value="apartment" {% if property_type == 'apartment' %}selected{% endif %}>Apartment</option>
          <option value="villa" {% if property_type == 'villa' %}selected{% endif %}>Villa</option>
          <option value="penthouse" {% if property_type == 'penthouse' %}selected{% endif %}>Penthouse</option>
          <option value="basement" {% if property_type == 'basement' %}selected{% endif %}>Basement</option>
          <option value="roof" {% if property_type == 'roof' %}selected{% endif %}>Roof</option>
          <option value="building" {% if property_type == 'building' %}selected{% endif %}>Building</option>
          <option value="mall" {% if property_type == 'mall' %}selected{% endif %}>Mall</option>
          <option value="office" {% if property_type == 'office' %}selected{% endif %}>Office</option>
          <option value="clinic" {% if property_type == 'clinic' %}selected{% endif %}>Clinic</option>
          <option value="duplex" {% if property_type == 'duplex' %}selected{% endif %}>Duplex</option>
          <option value="land" {% if property_type == 'land' %}selected{% endif %}>Land</option>
          <option value="Store" {% if property_type == 'Store' %}selected{% endif %}>Store</option>
      </select>
  </div>
  
  <div class="col-md-3">
    <select name="location" class="form-select filter-select">
        <option value="">Choose Area</option>
        {% for loc in all_locations %}
            <option value="{{ loc }}" {% if location == loc %}selected{% endif %}>{{ loc }}</option>
        {% endfor %}
    </select>
</div>
  <div class="col-md-3">
    <input type="number" name="max_price" class="form-control filter-input" placeholder="price" value="{{ max_price }}">
  </div>

  <div class="col-md-1">
      <button type="submit" class="btn btn-primary w-100">search</button>
  </div>

 
    
</form>


<div class="row">
  {% for property in page_obj %}
    <div class="col-md-6 mb-4">
      <div class="card property-card">
      
        {% if property.images.first %}
        <img src="{{ property.images.first.image.url }}" alt="صورة العقار" class="property-image">
        {% else %}
          <img src="{% static 'images/default.jpg' %}" alt="لا توجد صورة" class="property-image">
        {% endif %}
        
        <div class="card-body">
          <h5 class="card-title" onclick="alert('اضغط على التفاصيل لمشاهدة المزيد')">
            {{ property.title }}
          </h5>
          <p class="card-text"> price:- {{ property.formatted_price }} EGP</p>
          <p class="card-text"> area:- {{ property.area }} m </p>

          {% if property.is_available %}
            <span class="status available">✅ Available</span>
          {% else %}
            <span class="status sold-out">❌ Sold Out</span> 
          {% endif %}

          <a href="{% url 'property_detail' property.id %}">
            <strong class="details-label">التفاصيل</strong>
          </a>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

    <nav aria-label="Page navigation">
      <ul class="pagination">

       <!-- زر السابق -->
<li class="page-item previous {% if not page_obj.has_previous %}disabled{% endif %}">
  {% if page_obj.has_previous %}
    <a class="page-link" href="?page={{ page_obj.previous_page_number }}">السابق</a>
  {% else %}
    <span class="page-link">السابق</span>
  {% endif %}
</li>

<!-- أرقام الصفحات -->
{% for num in page_obj.paginator.page_range %}
  <li class="page-item {% if page_obj.number == num %}active{% endif %}">
    <a class="page-link" href="?page={{ num }}">{{ num }}</a>
  </li>
{% endfor %}

<!-- زر التالي -->
<li class="page-item next {% if not page_obj.has_next %}disabled{% endif %}">
  {% if page_obj.has_next %}
    <a class="page-link" href="?page={{ page_obj.next_page_number }}">التالي</a>
  {% else %}
    <span class="page-link">التالي</span>
  {% endif %}
</li>
      
      </ul>
    </nav>

    <div class="text-center mt-4">
      <a href="{% url 'about_us' %}" class="btn btn-outline-primary">About Us</a>
  </div>

</body>
</html>